{"version":3,"sources":["../../src/pages/inicio-sesion/inicio-sesion.module.ts","../../src/pages/inicio-sesion/inicio-sesion.ts"],"names":[],"mappings":"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","file":"7.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { InicioSesionPage } from './inicio-sesion';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    InicioSesionPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(InicioSesionPage),\r\n  ],\r\n})\r\nexport class InicioSesionPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/inicio-sesion/inicio-sesion.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ViewController, ModalController} from 'ionic-angular';\r\nimport { Http } from '@angular/http';\r\nimport { Storage } from '@ionic/storage';\r\n\r\n/**\r\n * Generated class for the InicioSesionPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-inicio-sesion',\r\n  templateUrl: 'inicio-sesion.html',\r\n})\r\nexport class InicioSesionPage {\r\n  userInfo: any = {};\r\n  response: any={};\r\n  registrado =false;\r\n  constructor(\r\n    public navCtrl: NavController, \r\n    public navParams: NavParams,\r\n    public viewCtrl: ViewController,\r\n    public http: Http,\r\n    public nativestorage: Storage,\r\n    public modalCtrl:ModalController\r\n    ) {\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad InicioSesionPage');\r\n\r\n  }\r\n\r\n  close(){\r\n    this.viewCtrl.dismiss();\r\n  }\r\n\r\n  register(){\r\n\r\n    this.nativestorage.set('Usuario',JSON.stringify({'accountId':12345, 'Telefono':123456, 'Nombre':'Mauricio'})).then(\r\n      (success)=>{\r\n      this.nativestorage.get('Usuario').then((usr) => {\r\n      });\r\n    });\r\n    this.viewCtrl.dismiss();\r\n    location.reload();\r\n\r\n    /*(<any>window).AccountKitPlugin.loginWithPhoneNumber({\r\n      useAccessToken: true,\r\n      defaultCountryCode: \"MX\",\r\n      facebookNotificationsEnabled: true,\r\n    }, (successdata) => {\r\n    (<any>window).AccountKitPlugin.getAccount((user)=>{\r\n      //alert(JSON.stringify(user));\r\n      this.userInfo = user;\r\n      this.registrado=true;\r\n      this.ValidaUsuario();\r\n    })\r\n  },(err)=>{\r\n      //alert(err);\r\n    });*/\r\n  }\r\n\r\n  ValidaUsuario(){\r\n    var link = \"http://mauvalsa.com/CutStore/ValidaUsuario.php\";\r\n    \r\n    var info = JSON.stringify({accountid:this.userInfo.accountId, 'tel': this.userInfo.phoneNumber});\r\n    //alert(JSON.stringify(this.userInfo));\r\n    this.http.post(link, info)\r\n    .subscribe(data =>{\r\n      this.response = data.json();\r\n      if(this.response.success === true){\r\n        this.nativestorage.set('Usuario',JSON.stringify({'accountId':this.userInfo.accountId, 'Telefono':this.userInfo.phoneNumber, 'Nombre':this.response.nombre})).then(\r\n          (success)=>{\r\n          this.nativestorage.get('Usuario').then((usr) => {\r\n          });\r\n        });\r\n        this.viewCtrl.dismiss();\r\n        location.reload();\r\n      }else{\r\n        this.registrado =true;\r\n        let modal = this.modalCtrl.create('RegistrarUsuarioPage',{userInfo:this.userInfo});\r\n        modal.present();\r\n        //alert(this.registrado);\r\n      }\r\n    },error => {\r\n      console.log(error);\r\n    })\r\n  }\r\n\r\n\r\n\r\n  \r\n\r\n}\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/inicio-sesion/inicio-sesion.ts"],"sourceRoot":""}