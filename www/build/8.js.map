{"version":3,"sources":["../../src/pages/anunciar/anunciar.module.ts","../../src/pages/anunciar/anunciar.ts"],"names":[],"mappings":"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","file":"8.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AnunciarPage } from './anunciar';\n\n@NgModule({\n  declarations: [\n    AnunciarPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AnunciarPage),\n  ],\n})\nexport class AnunciarPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/anunciar/anunciar.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ViewController, LoadingController  } from 'ionic-angular';\nimport { Camera, CameraOptions } from '@ionic-native/camera';\nimport { FileTransfer, FileUploadOptions, FileTransferObject } from '@ionic-native/file-transfer';\nimport { File } from '@ionic-native/file';\nimport { Http } from '@angular/http';\n\n/**\n * Generated class for the AnunciarPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-anunciar',\n  templateUrl: 'anunciar.html',\n})\n\nexport class AnunciarPage {\n  imagesrc:any;\n  accountId: any;\n  categoria:\"\";\n  titulo:\"\";\n  desc=\"\";\n  activo=false;\n  ubicacion=\"\";\n  dom=false;\n  precio=0;\n  tipo=1;\n  idAnuncio=0;\n  constructor(\n    public navCtrl: NavController, \n    public navParams: NavParams,\n    public viewCtrl: ViewController,\n    private camera: Camera,\n    private transfer: FileTransfer,\n    private file: File,\n    private loadingCtrl: LoadingController,\n    private http: Http\n    ) {\n      this.accountId = this.navParams.get('accountId');\n      this.tipo = this.navParams.get('tipo');\n      if (this.tipo ==2){\n        this.idAnuncio = this.navParams.get('idAnuncio');\n        this.ObtieneInfoAnuncio(this.idAnuncio);\n      }\n  }\n  \n\n \n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad AnunciarPage');\n  }\n\n  ObtieneInfoAnuncio(idAnuncio){\n    var link = \"http://mauvalsa.com/CutStore/ObtieneAnuncioInfo.php\";\n    var info = JSON.stringify({'idAnuncio':idAnuncio});\n    this.http.post(link, info)\n    .subscribe(data =>{\n      let anuncio = data.json();\n      this.titulo = anuncio.Titulo;\n      this.categoria = anuncio.Tipo;\n      this.desc = anuncio.Descripcion;\n      this.activo = false;\n      if (anuncio.Estatus==1){\n        this.activo = true;\n      }\n      this.ubicacion = anuncio.Ubicacion;\n      this.dom = false;\n      if(anuncio.EntregaDom ==1){\n        this.dom = true;\n      }\n      this.imagesrc = \"http://mauvalsa.com/CutStore/PhotosAnuncios/\" + anuncio.idAnuncio + \".jpg\";\n      this.precio= anuncio.Precio;\n      \n      //alert(JSON.stringify(anuncio));\n    },error =>{\n        console.log(error);\n      }\n      )\n  }\n\n  close(){\n    this.viewCtrl.dismiss({'response':0});\n  }\n\n  LoadPhoto(){\n    const options: CameraOptions = {\n      quality: 100,\n      destinationType: this.camera.DestinationType.FILE_URI,\n      encodingType: this.camera.EncodingType.JPEG,\n      mediaType: this.camera.MediaType.PICTURE\n    }\n    \n    this.camera.getPicture(options).then((imageData) => {\n     // imageData is either a base64 encoded string or a file URI\n     // If it's base64 (DATA_URL):\n     this.imagesrc = 'data:image/jpeg;base64,' + imageData;\n    }, (err) => {\n     // Handle error\n    });\n  }\n  \n  deGaleria(){\n    const options: CameraOptions = {\n      quality: 100,\n      destinationType: this.camera.DestinationType.DATA_URL,\n      sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,\n      saveToPhotoAlbum: false,\n      allowEdit: true,\n      targetWidth: 375,\n      targetHeight: 375\n\n    }\n    \n    this.camera.getPicture(options).then((imageData) => {\n     // imageData is either a base64 encoded string or a file URI\n     // If it's base64 (DATA_URL):\n     this.imagesrc = 'data:image/jpeg;base64,' + imageData;\n    }, (err) => {\n      console.log(err);\n     // Handle error\n    });\n  }\n\n  publicar(tipo){\n    let loader = this.loadingCtrl.create();\n    loader.present();\n    var photoName:any;\n    var response:any={};\n    var domi = 0;\n    if(this.dom === true){\n      domi = 1;\n    }\n    var activ= 0;\n    if(this.activo ===true){\n      activ =1;\n    }\n    var link = \"http://mauvalsa.com/CutStore/RegistrarPublicacion.php\";\n    var info = JSON.stringify({'accountid':this.accountId, 'titulo':this.titulo,'desc':this.desc,'ubicacion': this.ubicacion,\n                              'dom': domi, 'precio':this.precio, 'activo':activ, 'cat': this.categoria, 'tipo': tipo, 'idAnuncio':this.idAnuncio});\n    this.http.post(link, info)\n    .subscribe(data =>{\n      response = data.json();\n      if (response.success === true ){\n        if (tipo == 1){\n           //Guardar foto\n         photoName = response.id;\n         const FileTransfer: FileTransferObject = this.transfer.create();\n         \n         let options: FileUploadOptions = {\n           fileKey: 'photo',\n           fileName: photoName ,\n           chunkedMode: false,\n           httpMethod: 'post',\n           mimeType: 'image/jpeg',\n           headers: {}\n         }\n         FileTransfer.upload(this.imagesrc, 'http://mauvalsa.com/CutStore/subirfoto.php', options)\n           .then((data) => {\n             let res: any ={};\n             res = data;\n             loader.dismiss();\n             if (res.response = 1){\n                 this.viewCtrl.dismiss({'response':1});\n             }else{\n               this.viewCtrl.dismiss({'response':0});\n             }\n           // success\n           loader.dismiss;\n           }, (err) => {\n           // error\n           alert(err);\n           loader.dismiss();\n           //this.presentToast(err);\n         });\n        }else{\n          this.viewCtrl.dismiss({'response':1});\n          loader.dismiss();\n        }\n        \n      }else{\n        alert(JSON.stringify(response));\n        alert(\"Ocurrio un error\");\n        loader.dismiss();\n      }\n    },error =>{\n      console.log(error);\n      loader.dismiss();\n    });\n\n    \n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/anunciar/anunciar.ts"],"sourceRoot":""}